RadEditorDomInspector.prototype=new RadEditorModuleBase( ); RadEditorDomInspector.prototype.base=RadEditorModuleBase.prototype.constructor; var DOM_INSPECTOR_HORIZONTAL_HEIGHT="\x320px"; var DOM_INSPECTOR_VERTICAL_HEIGHT="\x380px"; function RadEditorDomInspector(moduleArgs){var theDiv=moduleArgs.Document.createElement("DIV"); theDiv.style.paddingTop="\x32px"; if (window.opera){theDiv.style.height=DOM_INSPECTOR_HORIZONTAL_HEIGHT; theDiv.style.lineHeight=DOM_INSPECTOR_HORIZONTAL_HEIGHT; }moduleArgs.ModuleElement=theDiv; this.base(moduleArgs); this.SelectedDomCouple=null; this.RemoveElementString=this.GetLocalizedString("DomInspe\x63torRe\x6doveElem\x65nt","Remove E\x6c\145\x6dent"); }
; RadEditorDomInspector.prototype.OnDispose= function ( ){ this.Clear( ); this.SelectedDomCouple=null; this.SelectedElement=null; };RadEditorDomInspector.prototype.OnRenderHorizontal= function ( ){ this.style.height=DOM_INSPECTOR_HORIZONTAL_HEIGHT; } ; RadEditorDomInspector.prototype.OnRenderVertical= function ( ){ this.style.height=DOM_INSPECTOR_VERTICAL_HEIGHT; } ; RadEditorDomInspector.prototype.OnCreate= function ( ){var selfPointer=this ; this.AttachEventHandler(RadEditorNamespace.RADEVENT_SEL_CHANGED, function ( ){selfPointer.CreatePath( ); } ); var topElem=this.TopElement; topElem.OnRenderVertical=this.OnRenderVertical; topElem.OnRenderHorizontal=this.OnRenderHorizontal; topElem.style.width=this.Editor.Width; topElem.style.height=DOM_INSPECTOR_HORIZONTAL_HEIGHT; } ; RadEditorDomInspector.prototype.CreatePath= function ( ){if (!this.IsEnabled)return; var elem=this.Editor.GetSelectedElement( ); if (!elem)return; var contentArea=this.Editor.ContentArea; if (this.Editor.IsIE && !contentArea.contains(elem))return; var array=[ ]; var counter=0; while (elem!=contentArea && null!=elem){array[counter++]=elem; elem=elem.parentNode; } this.Clear( ); var domCouple=null; var domElement; var isLast= false; for (var i=array.length-1; i>=0; i--){domElement=array[i]; isLast=(0==i) || (null!=this.SelectedElement && domElement==this.SelectedElement); if (domElement && domElement.tagName){isSelected=(0==i) || (null!=this.SelectedElement && domElement==this.SelectedElement); domCouple=this.AddDomCouple(domElement,isSelected); }if (isLast){break; }} this.SelectedElement=null; this.SelectedDomCouple=domCouple; if (this.SelectedDomCouple){var domLink=this.Document.createElement("\x41"); domLink.innerHTML=this.RemoveElementString; domLink.href="j\x61vascrip\x74:void(0\x29"; domLink.className="\x44omPathL\x69\156\x6b"; domLink.Parent=this ; domLink.onmousedown=new Function("\x74his.Par\x65\156\x74.Remo\x76eSelec\x74edElem\x65\156\x74();r\x65turn\x20false;"); this.ModuleElement.appendChild(domLink); }} ; RadEditorDomInspector.prototype.AddDomCouple= function (domElement,isSelected){var domLink=this.Document.createElement("\x41"); this.ModuleElement.appendChild(domLink); var empty=this.Document.createElement("S\x50AN"); empty.innerHTML="&n\x62sp;> "; this.ModuleElement.appendChild(empty); var couple=new DomCouple(domLink,domElement,(isSelected?"\x44omPath\x4c\151\x6ekSel\x65\143\x74ed": ""),isSelected,this ); return couple; } ; RadEditorDomInspector.prototype.Clear= function ( ){if (this.SelectedDomCouple){ this.SelectedDomCouple.Clear( ); }var links=this.ModuleElement.getElementsByTagName("A"); for (i=0; i<links.length; i++){var link=links[i]; link.Parent=null; } this.ModuleElement.innerHTML=""; } ; RadEditorDomInspector.prototype.RemoveSelectedElement= function ( ){if (!this.Editor.IsEditingEnabled( ))return; if (!this.SelectedDomCouple || !this.SelectedDomCouple.DomElement){return; }var elem=this.SelectedDomCouple.DomElement; try {if (elem.tagName=="TD" || elem.tagName=="TH"){ this.Editor.DeleteCell( ); }else if (elem.tagName=="\x54R"){ this.Editor.DeleteRow( ); }else if (elem.tagName=="TAB\x4cE" || elem.tagName=="\124\x42ODY" || elem.tagName=="\x54H\x45\x41D" || elem.tagName=="\x54FOOT" || elem.tagName=="\x45MBED" || elem.tagName=="\x4fBJEC\x54" || elem.tagName=="INPU\x54" || elem.tagName=="IMG" || elem.tagName=="\x48R"){var cmd=RadEditorNamespace.RadGenericCommand.New(this.RemoveElementString,this.Editor.ContentWindow); var parentNode=elem.parentNode; parentNode.removeChild(elem); this.Editor.SetFocus( ); this.Editor.ExecuteCommand(cmd); restorePoint.Select( ); this.Editor.SetActive( ); this.Editor.SetFocus( ); }else if (elem.tagName!="BODY"){var restorePoint=RadEditorNamespace.RadCreateRestorePoint(this.Editor.ContentWindow); var parentNode=elem.parentNode; var cmd=RadEditorNamespace.RadGenericCommand.New(this.RemoveElementString,this.Editor.ContentWindow); var newHtml=""; for (var i=0; i<parentNode.childNodes.length; i++){if (elem!=parentNode.childNodes[i]){newHtml+=RadEditorNamespace.Utils.GetOuterHtml(parentNode.childNodes[i]); }else {newHtml+=elem.innerHTML; }}parentNode.innerHTML=newHtml; this.Editor.SetFocus( ); this.Editor.ExecuteCommand(cmd); restorePoint.Select( ); this.Editor.SetActive( ); this.Editor.SetFocus( ); }}catch (ex){} this.Editor.FireEvent(RadEditorNamespace.RADEVENT_SEL_CHANGED,null); } ; RadEditorDomInspector.prototype.SelectElement= function (elem){try { this.SelectedElement=elem; this.Editor.SelectElement(elem); this.SelectedElement=null; }catch (ex){}};function DomCouple(domLink,domElement,className,isSelected,RadEditorDomInspector){ this.RadEditorDomInspector=RadEditorDomInspector; this.DomLink=domLink; this.DomElement=domElement; this.Selected=isSelected; if (domLink){domLink.href="j\x61vascrip\x74:void(0\x29\073"; domLink.className=className?className: "DomPath\x4cink"; domLink.Parent=this ; domLink.onclick=new Function("\164\x68is.P\x61rent.Sel\x65ctEle\x6dent();"); domLink.onmouseover=new Function("this.P\x61rent.o\x6emouseov\x65r();"); domLink.onmouseout=new Function("this.Par\x65nt.on\x6d\157\x75seou\x74();"); if (domElement!=null){domLink.innerHTML=domElement.tagName; }}}
; DomCouple.prototype.Clear= function ( ){ this.RadEditorDomInspector.SelectedDomCouple=null; this.DomLink.className="DomPathL\x69nk"; } ; DomCouple.prototype.onmouseover= function ( ){if (this.Selected)return; try { this.DomElementClass=this.DomElement.className; this.DomElement.className+=" Rad\x45DomMou\x73eOver"; }catch (e){ ; }} ; DomCouple.prototype.onmouseout= function ( ){if (null!=this.DomElementClass)this.DomElement.className=this.DomElementClass; try {if (""==this.DomElement.className){ this.DomElement.removeAttribute("\x63lass\x4e\141\x6de",0); this.DomElement.removeAttribute("\143\x6cass",0); }}catch (e){ ; }} ; DomCouple.prototype.SelectElement= function ( ){ this.onmouseout( ); if (this.RadEditorDomInspector.SelectedDomCouple){ this.RadEditorDomInspector.SelectedDomCouple.Clear( ); } this.DomLink.className="\x44om\x50\141\x74hLink\x53elected"; this.RadEditorDomInspector.SelectedDomCouple=this ; this.RadEditorDomInspector.SelectElement(this.DomElement); } ;
RadEditorHtmlInspector.prototype=new RadEditorModuleBase( ); RadEditorHtmlInspector.prototype.base=RadEditorModuleBase.prototype.constructor; function RadEditorHtmlInspector(moduleArgs){var txtArea=moduleArgs.Document.createElement("\x54\105\x58TAREA"); moduleArgs.ModuleElement=txtArea; txtArea.style.width="\x399%"; moduleArgs.ClassName="\x52adETex\x74\101\x72ea"; this.base(moduleArgs); this.ModuleElement.setAttribute("rows","10"); this.ModuleElement.setAttribute("\143\x6fls","\x380"); if (!document.all)this.ModuleElement.onclick= function ( ){ this.focus( ); } ; }
; RadEditorHtmlInspector.prototype.OnDispose= function ( ){ this.ModuleElement.onkeyup=null; };RadEditorHtmlInspector.prototype.IsSelChanged= function (keyCode){if (keyCode==32 || keyCode==9 || keyCode==8 || keyCode==46 || keyCode==13){return true; }if (keyCode==190)return true; if (keyCode>47 && keyCode<58)return true; return false; } ; RadEditorHtmlInspector.prototype.OnCreate= function ( ){var selfPointer=this ; this.AttachEventHandler(RadEditorNamespace.RADEVENT_SEL_CHANGED, function ( ){selfPointer.OnSelectionChanged( ); } ); this.AttachEventHandler(RadEditorNamespace.RADEVENT_CALLBACK_STARTED, function ( ){selfPointer.ModuleElement.value=""; } ); this.ModuleElement.onkeyup= function anon(e){if (!e)e=window.event; if (selfPointer.IsSelChanged(e.keyCode)){selfPointer.UpdateContentArea(e); }} ; var oModule=this ; this.TopElement.OnResize= function ( ){var oArea=oModule.ModuleElement; oArea.style.height=(parseInt(oModule.TopElement.offsetHeight)-3)+"\x70x"; oArea.style.width=(parseInt(oModule.TopElement.offsetWidth)-3)+"\x70x"; };} ; RadEditorHtmlInspector.prototype.UpdateContentArea= function (e){if (!this.IsEnabled)return; this.Flag= true; this.Editor.SetHtml(this.ModuleElement.value,this.Localization['\x54yping'], false); this.ModuleElement.focus( ); } ; RadEditorHtmlInspector.prototype.OnSelectionChanged= function ( ){if (this.Flag){ this.Flag= false; return; } this.ModuleElement.value=this.Editor.GetHtml( ); } ;
RadEditorNamespace.RadSpinBox= function (toolArgs){ this.Width=toolArgs.Width?parseInt(toolArgs.Width)+"\160x": "\x350px"; this.Title=toolArgs.Title; this.Controller=toolArgs.Controller; this.Name=toolArgs.Name; this.Document=toolArgs.Document; this.SelectedValue=""; this.ClassName="\122\x61dET\x65\x78t\x42ox"; };RadEditorNamespace.RadSpinBox.prototype.Dispose= function ( ){ this.Element.onchange=null; this.Element.onkeypress=null; this.Element.onclick=null; this.Element.Parent=null; this.Element=null; } ; RadEditorNamespace.RadSpinBox.prototype.GetTopElement= function ( ){return this.Element; } ; RadEditorNamespace.RadSpinBox.prototype.GetSelectedValue= function ( ){return this.SelectedValue; } ; RadEditorNamespace.RadSpinBox.prototype.SetValue= function (value){ this.Element.value=value; } ; RadEditorNamespace.RadSpinBox.prototype.Create= function ( ){var inputElement=this.Document.createElement("\111\x4ePUT"); inputElement.setAttribute("\x73\x69\x7ae","\x33"); inputElement.style.width=this.Width; inputElement.className=this.ClassName; inputElement.Parent=this ; var commandName=this.Name; var executeFunction= function (e,elem,isSecondToExecute){elem.Executed= true; elem.Parent.SelectedValue=elem.value; elem.Parent.Controller.Fire(commandName,elem.Parent); return RadEditorNamespace.Utils.CancelEvent(e); } ; inputElement.onchange= function (e){if (!e)e=window.event; return executeFunction(e,this, true); } ; inputElement.onclick= function (e){ this.focus( ); } ; inputElement.onkeypress= function (e){if (!e)e=window.event; if (e.keyCode==13){return executeFunction(e,this ); }} ; this.Element=inputElement; return this.Element; } ; RadEditorNamespace.RadCheckBox= function (toolArgs){ this.Title=toolArgs.Title; this.Controller=toolArgs.Controller; this.Name=toolArgs.Name; this.Document=toolArgs.Document; this.SelectedValue= false; };RadEditorNamespace.RadCheckBox.prototype.Dispose= function ( ){ this.Element.onclick=null; this.Element.Parent=null; this.Element=null; } ; RadEditorNamespace.RadCheckBox.prototype.GetTopElement= function ( ){return this.Element; } ; RadEditorNamespace.RadCheckBox.prototype.GetSelectedValue= function ( ){return this.SelectedValue; } ; RadEditorNamespace.RadCheckBox.prototype.SetValue= function (value){if (this.Element.checked!=value)this.Element.checked=value; } ; RadEditorNamespace.RadCheckBox.prototype.Create= function ( ){var inputElement=this.Document.createElement("I\x4ePUT"); inputElement.setAttribute("\x74yp\x65","CHEC\x4b\102\x4fX"); inputElement.Parent=this ; inputElement.onclick= function (e){var oP=this.Parent; oP.SelectedValue=!oP.SelectedValue; this.checked=oP.SelectedValue; oP.SelectedValue=this.checked; oP.Controller.Fire(oP.Name,oP); } ; this.Element=inputElement; return this.Element; } ; RadEditorNamespace.RadTargetBox= function (toolArgs){ this.Title=toolArgs.Title; this.Controller=toolArgs.Controller; this.Name=toolArgs.Name; this.Document=toolArgs.Document; this.Width=toolArgs.Width?toolArgs.Width: "95px"; this.TargetList=toolArgs.TargetList; this.SelectedValue=""; };RadEditorNamespace.RadTargetBox.prototype.Dispose= function ( ){ this.Element.onchange=null; this.Element.Parent=null; this.TargetList=null; this.Element=null; } ; RadEditorNamespace.RadTargetBox.prototype.GetTopElement= function ( ){return this.Element; } ; RadEditorNamespace.RadTargetBox.prototype.GetSelectedValue= function ( ){return this.SelectedValue; } ; RadEditorNamespace.RadTargetBox.prototype.SetValue= function (value){var options=this.Element.options; for (var i=0; i<options.length; i++){if (options[i].value==value){ this.Element.selectedIndex=i; return; }} this.Element.selectedIndex=-1; } ; RadEditorNamespace.RadTargetBox.prototype.Create= function ( ){var inputElement=this.Document.createElement("\x53ELEC\x54"); inputElement.className="Ra\x64\105\x44\x72o\x70Down"; inputElement.style.width=this.Width; var targetList=this.TargetList; inputElement.options[0]=new Option("---",""); for (var item in targetList){if (typeof(targetList[item])=="\x73t\x72\x69ng"){inputElement.options[inputElement.options.length]=new Option(targetList[item],item); }}inputElement.Parent=this ; var commandName=this.Name; inputElement.onchange= function ( ){ this.Parent.SelectedValue=this.options[this.selectedIndex].value; this.Parent.Controller.Fire(commandName,this.Parent); } ; this.Element=inputElement; return this.Element; } ; RadEditorNamespace.ATTRIBUTE_INSPECTOR_HORIZONTAL_HEIGHT="\x351px"; RadEditorNodeInspector.prototype=new RadEditorModuleBase( ); RadEditorNodeInspector.prototype.base=RadEditorModuleBase.prototype.constructor; function RadEditorNodeInspector(moduleArgs){var oName=window.opera?"SPAN": "DIV"; moduleArgs.ModuleElement=moduleArgs.Document.createElement(oName); this.base(moduleArgs); this.ArrowDropdownUrl=this.Editor.SkinBasePath+"Bu\x74tons/arr\x6fwDropdow\x6e.gif"; this.ArrowIconUrl=this.Editor.SkinBasePath+"B\x75ttons/ar\x72owIcon.g\x69f"; this.IsIE=document.all && !window.opera? true : false; this.Controls= {} ; this.ControlNames= {} ; this.SelectedElement=null; this.SelectedElementString=this.GetLocalizedString("No\x64eInspe\x63torSelec\x74edElem\x65nt","The \x73\145\x6cected \x65\154\x65ment i\x73\040"); this.InvalidValueString=this.GetLocalizedString("NodeIn\x73pectorI\x6evalidVa\x6cue","Invalid\x20\166\x61lue. Pl\x65ase ent\x65r a nu\x6dber."); }
; RadEditorNodeInspector.prototype.GetNamedCssForSelectedElement= function (oVal){return this.Editor.GetNamedCssForSelectedElement(oVal); } ; RadEditorNodeInspector.prototype.OnDispose= function ( ){var controls=this.Controls; for (var ctrlName in controls){var ctrl=controls[ctrlName]; if (ctrl.Dispose){ctrl.Dispose( ); }}var mainTable=this.MainPanel; if (mainTable){for (var rowCount=0; rowCount<mainTable.rows.length; rowCount++){var oRow=mainTable.rows[rowCount]; var len=oRow.cells.length; for (var i=0; i<len; i++){var delTd=oRow.cells[0]; delTd.style.display=""; delTd.parentNode.deleteCell(delTd); }}} this.Controls=null; this.MainPanel=null; } ; RadEditorNodeInspectorAttributesArray=[["rows","NA\x4dE","\x77idth","\x63ell\x53\x70ac\x69ng","align","\x68\162\x65\146","\x76alu\x65","c\x6cassName",RadEditorNamespace.RADCOMMAND_SET_TABLE_PROPERTIES,RadEditorNamespace.RADCOMMAND_SET_CELL_PROPERTIES,RadEditorNamespace.RADCOMMAND_SET_LINK_PROPERTIES,RadEditorNamespace.RADCOMMAND_SET_IMAGE_PROPERTIES],["col\x73","\x69d","\x68eight","acti\x6f\156","cellPa\x64\144i\x6eg","bo\x72\144e\x72\103\x6f\154o\x72","bgColor","border","alt","noWrap","\164\x61\162g\x65t","title"]]; RadEditorNodeInspector.prototype.NodeAttributesArray= {} ; RadEditorNodeInspector.prototype.NodeAttributesArray["TAB\x4cE"]=["\x77id\x74\x68","cellSp\x61cing","\x62gColor","\x63\154a\x73\163\x4eame",RadEditorNamespace.RADCOMMAND_SET_TABLE_PROPERTIES,"\x68ei\x67\150t","cellPa\x64\144i\x6eg","align","bord\x65r"]; RadEditorNodeInspector.prototype.NodeAttributesArray["TH"]=RadEditorNodeInspector.prototype.NodeAttributesArray["\x54D"]=["width","bgCol\x6fr","cla\x73sName",RadEditorNamespace.RADCOMMAND_SET_CELL_PROPERTIES,"height","align","\156\x6f\127r\x61p"]; RadEditorNodeInspector.prototype.NodeAttributesArray["TR"]=["\x77id\x74\x68","c\x6c\141s\x73\116\x61\155e","height"]; RadEditorNodeInspector.prototype.NodeAttributesArray["A"]=["\x68ref","c\x6cassName",RadEditorNamespace.RADCOMMAND_SET_LINK_PROPERTIES,"\x74itl\x65","\164\x61\x72ge\x74"]; RadEditorNodeInspector.prototype.NodeAttributesArray["IMG"]=["\x77idth","bo\x72derColor","\x63las\x73\x4eam\x65",RadEditorNamespace.RADCOMMAND_SET_IMAGE_PROPERTIES,"\150\x65ight","align","\x62order","al\x74"]; RadEditorNodeInspector.prototype.NodeAttributesArray["\x49\116\x50\125T"]=["\x4eAME","wid\x74\150","height","\x69d","title","value","\x63lassNam\x65"]; RadEditorNodeInspector.prototype.NodeAttributesArray["\x46\x4fRM"]=["\x63la\x73\163\x4eame","width","\x68ei\x67\150\x74","\x4eAME","\141\x63\x74ion","\x69d"]; RadEditorNodeInspector.prototype.NodeAttributesArray["TEXTAR\x45A"]=["\x63lassNa\x6d\x65","\167\x69\x64th","hei\x67\150t","\x4eAME","id","\x72ows","\x63ols"]; RadEditorNodeInspector.prototype.OnCreate= function ( ){var selfPointer=this ; this.AttachEventHandler(RadEditorNamespace.RADEVENT_SEL_CHANGED, function ( ){selfPointer.UpdateMainPanel( ); } ); var topElem=this.TopElement; topElem.OnRenderVertical=RadEditorNamespace.AttributeInspector_OnRenderVertical; topElem.OnRenderHorizontal=RadEditorNamespace.AttributeInspector_OnRenderHorizontal; topElem.style.height=RadEditorNamespace.ATTRIBUTE_INSPECTOR_HORIZONTAL_HEIGHT; topElem.style.width=this.Editor.Width; } ; RadEditorNodeInspector.prototype.CreateMainPanel= function ( ){var controls=this.Controls; var controlNames=this.ControlNames; var mainPanelArray=RadEditorNodeInspectorAttributesArray; var mainTable=this.Document.createElement("\x54AB\x4c\105"); mainTable.border=0; mainTable.cellSpacing=0; mainTable.cellPadding=0; for (var rowCount=0; rowCount<mainPanelArray.length; rowCount++){var curRow=mainPanelArray[rowCount]; var oRow=mainTable.insertRow(-1); for (var i=0; i<curRow.length; i++){var item=curRow[i]; var oCell=oRow.insertCell(-1); oCell.style.display="none"; oCell.setAttribute("\x63ontrolNa\x6de",item); oCell.innerHTML=this.GetLocalizedString(item,item); oCell.className="RadE\x54oolText"; oCell.style.paddingLeft="\x34px"; oCell=oRow.insertCell(-1); oCell.style.display="n\x6fne"; oCell.setAttribute("contr\x6flHolder",item); var control=this.GetControlByName(item); if (control){controls[item]=control; oCell.appendChild(control.GetTopElement( )); }}}return mainTable; };RadEditorNodeInspector.prototype.UpdateMainPanel= function ( ){if (!this.IsEnabled)return; if (!this.IsMainCreated){ this.MainPanel=this.CreateMainPanel( ); this.MainPanel.style.display="none"; this.ModuleElement.appendChild(this.MainPanel); this.IsMainCreated= true; }var oElem=this.Editor.GetSelectedElement( ); var Q= false; if (oElem){if (this.Editor.SmartForm && (this.Editor.SmartForm.isDDFieldElement(oElem) || this.Editor.SmartForm.isCustomTag(oElem))){Q= true; }else if (oElem.parentNode && "\x53PAN"==oElem.parentNode.tagName && this.Editor.SmartForm && (this.Editor.SmartForm.isDDFieldElement(oElem.parentNode) || this.Editor.SmartForm.isCustomTag(oElem.parentNode))){Q= true; }else if ("string"==typeof oElem.className && oElem.className!=""){var elemClassName=oElem.className; $ektron.each((elemClassName || "").split(/\s+/), function (i,className){if ($ektron.browser.msie && parseInt($ektron.browser.version,10)>=9 && "design_s\x65lected\x5ffield"==className){return false; }else if ("d\x65sign_"==className.substr(0,7) || "\x65\153\x74\x72o\x6e\137\x74\150\x75mbnai\x6c"==className){Q= true; return false; }} ); }}if (!oElem || oElem.tagName=="\x42OD\x59" || oElem.ownerDocument!=this.Editor.Document || true ==Q){ this.MainPanel.style.display="non\x65"; return; }if (oElem.tagName=="TBODY" && this.Editor.IsOpera){oElem=oElem.parentNode; }var controlRow=this.NodeAttributesArray[oElem.tagName]; if (!controlRow){var oCell=RadEditorNamespace.Utils.GetElementParentByTag(oElem,"A"); if (!oCell)oCell=RadEditorNamespace.Utils.GetElementParentByTag(oElem,"\x54D"); if (!oCell)oCell=RadEditorNamespace.Utils.GetElementParentByTag(oElem,"\x54H"); if (oCell)oElem=oCell; else { this.MainPanel.style.display="n\x6fne"; return; }}var tagName=null; if (this.SelectedElement){try {tagName=this.SelectedElement.tagName; }catch (e){ ; }}if (!this.SelectedElement || (tagName!=oElem.tagName)){var editor=this.Editor; var cssDocument=this.Editor.GetDocument( ); var cssControl=this.Controls["classNa\x6de"]; cssControl.IsCreated= false; cssControl.GetDataFunction= function (name){return editor.GetCssClassesByTagName(oElem.tagName,editor.Document); } ; this.Controls["\x61lign"].SetTagName(oElem.tagName); } this.SelectedElement=oElem; this.UpdateControlValues(this.SelectedElement); this.MainPanel.style.display=""; } ; RadEditorNodeInspector.prototype.UpdateControlValues= function (oElem){var controlRow=this.NodeAttributesArray[oElem.tagName]; var mainTable=this.MainPanel; var controls=this.Controls; for (var rowCount=0; rowCount<mainTable.rows.length; rowCount++){var oRow=mainTable.rows[rowCount]; for (var i=0; i<oRow.cells.length; i++){var oCell=oRow.cells[i]; var attrName=oCell.getAttribute("c\x6fntrolNa\x6de"); if (attrName){oCell.style.display=this.ArrayValueExists(attrName,controlRow)?"": "none"; }var attrHolder=oCell.getAttribute("\x63ontro\x6c\x48\x6f\154\x64\145\x72"); if (attrHolder){oCell.style.display=this.ArrayValueExists(attrHolder,controlRow)?"": "\x6eon\x65"; if ("none"==oCell.style.display)continue; var control=controls[attrHolder]; var attr=oElem.getAttribute?oElem.getAttribute(attrHolder): ""; if (attrHolder=="\x6eoWra\x70"){control.SetValue(oElem.noWrap); }else if (attrHolder=="alig\x6e"){control.SetValue(oElem.getAttribute("align"),oElem.getAttribute("vA\x6cign")); }else if (attrHolder=="\x62order\x43\157\x6cor" || attrHolder=="wi\x64\164h" || attrHolder=="he\x69ght"){var oVal; switch (attrHolder){case "\x77idth":oVal=$ektron(oElem).width( ); break; case "height":oVal=$ektron(oElem).height( ); break; default:oVal=oElem.style[attrHolder]; if (!oVal)oVal=oElem.getAttribute(attrHolder); break; }control.SetValue(oVal); }else if ("name"==attrHolder.toLowerCase( )){control.SetValue(oElem.name); }else if (("href"==attrHolder || "\x73rc"==attrHolder) && oElem.getAttribute("dat\x61-ektron\x2durl")){control.SetValue($ektron(oElem).attr("\x64ata-\x65\153\x74ron-url")); }else if (attr){control.SetValue(attr); }else if (!this.IsIE && "cla\x73\163N\x61me"==attrHolder){var attr=oElem.getAttribute?oElem.getAttribute("\x63lass"): ""; if (attr)control.SetValue(attr); }else {if (control.SetValue)control.SetValue(""); }}}}} ; RadEditorNodeInspector.prototype.Fire= function (commandName,oTool){if (!this.Editor.IsEditingEnabled( ))return; var title=this.GetLocalizedString(commandName,commandName); var oElem=this.SelectedElement; if (commandName==RadEditorNamespace.RADCOMMAND_SET_CELL_PROPERTIES || commandName==RadEditorNamespace.RADCOMMAND_SET_TABLE_PROPERTIES || commandName==RadEditorNamespace.RADCOMMAND_SET_IMAGE_PROPERTIES || commandName==RadEditorNamespace.RADCOMMAND_SET_LINK_PROPERTIES){ this.Editor.Fire(commandName,this ); return; }else if ("ali\x67n"==commandName){var align=oTool.GetAlign( ); var vAlign=oTool.GetVAlign( ); this.Editor.ExecuteSetAttributeCommand(oElem,"align",align,title); title=this.GetLocalizedString("vAli\x67n","vAlign"); this.Editor.ExecuteSetAttributeCommand(oElem,"vAlig\x6e",vAlign,title); }else if ("\x62orderCol\x6fr"==commandName){var selValue=oTool.GetSelectedValue( ); this.Editor.ExecuteSetStyleRuleCommand(this.SelectedElement,"\x62or\x64\145\x72Color",selValue,title); }else if ("width"==commandName || "\x68e\x69\x67ht"==commandName){var selValue=oTool.GetSelectedValue( ); if (!this.IsValidAttribValue(selValue)){alert(this.InvalidValueString); return; }function ConvertIntToPixel(oVal){var oNew=""+oVal; if (oNew.indexOf("%")!=-1){return oNew; }else {oNew=parseInt(oNew); if (!isNaN(oNew)){oNew=oNew+"\x70x"; return oNew; }}return oVal; }selValue=ConvertIntToPixel(selValue); if (this.SelectedElement.removeAttribute)this.SelectedElement.removeAttribute(commandName); this.Editor.ExecuteSetStyleRuleCommand(this.SelectedElement,commandName,selValue,title); }else {var attribName=commandName; var attribValue=oTool.GetSelectedValue( ); switch (commandName){case RadEditorNamespace.RADCOMMAND_APPLY_CLASS:attribName="\x63la\x73\163\x4eame"; break; case RadEditorNamespace.RADCOMMAND_BACKCOLOR:attribName="bgCo\x6cor"; break; case "\x76alue":break; case "noWr\x61\160":if (attribValue)attribValue="\x6eoWrap"; else attribValue=""; break; case "border":case "\x63e\x6c\x6cSpa\x63ing":case "\143\x65\x6clPa\x64ding":if (!this.IsValidAttribValue(attribValue)){alert(this.InvalidValueString); return; }break; case "\163\x72c":case "\150r\x65\146": this.Editor.ExecuteSetAttributeCommand(oElem,"dat\x61\055\x65ktron-\x75rl",attribValue,title); break; case "NAME":if (!this.IsIE)attribName="name"; }var theEditor=this.Editor; setTimeout( function ( ){theEditor.ExecuteSetAttributeCommand(oElem,attribName,attribValue,title); } ,100); } this.Editor.FireEvent(RadEditorNamespace.RADEVENT_SEL_CHANGED); };RadEditorNodeInspector.prototype.GetSelectedValue= function ( ){return this.SelectedElement; } ; RadEditorNodeInspector.prototype.GetIconUrl= function (fileName){return (this.Editor.SkinBasePath+"\102\x75ttons/"+fileName); } ; RadEditorNodeInspector.prototype.ArrayValueExists= function (value,array){for (var i=0; i<array.length; i++){if (array[i]==value)return true; }return false; } ; RadEditorNodeInspector.prototype.IsValidAttribValue= function (value){if (null==value)return false; value=RadEditorNamespace.Utils.Trim(value); if (""==value)return true; var result=parseInt(value); if (isNaN(result)){return false; }return true; } ; RadEditorNodeInspector.prototype.GetControlByName= function (name){var control=null; var theWidth=null; var editor=this.Editor; var oController=this ; var localiz=this.Localization; var getControllerFn= function ( ){return oController; } ; switch (name){case "c\x6cassName":var toolArgs= {GetController:getControllerFn,Document: this.Document,Name:RadEditorNamespace.RADCOMMAND_APPLY_CLASS,Title: this.Localization[RadEditorNamespace.RADCOMMAND_APPLY_CLASS],ArrowUrl: this.ArrowDropdownUrl,Width: 80,PopupWidth: 180,PopupHeight: 150,CellSpacing: 2,CellPadding: 2,UseCssArray: false ,ClearStyleString:localiz["Clear\x53tyle"],PopupIconPath: this.Editor.SkinBasePath+"\x49mg/" } ; control=RadEditorNamespace.RadCssCombo.New(toolArgs); control.Create( ); break; case "borde\x72Color":case "bgColo\x72":var toolArgs= {GetController:getControllerFn,Document: this.Document,Name: "\x62orderCo\x6c\157\x72"==name?"\x62or\x64\x65rC\x6flor":RadEditorNamespace.RADCOMMAND_BACKCOLOR,AddCustomColor:localiz["AddCust\x6f\155\x43olor"],AddCustomHexColor:localiz["A\x64dCustomH\x65xColor"],PromptColor:localiz["P\x72omptColo\x72"],Title: this.GetLocalizedString(name),ArrowUrl: this.ArrowIconUrl,PopupWidth: 120,PopupHeight: 120,CellSpacing: 1,CellPadding: 1,IconUrl: this.GetIconUrl("\x42ackColor\x2egif"),AllowCustomColors: this.Editor.AllowCustomColors,GetDataFunction:function (name){return editor.GetDataArrayForTool("Ba\x63kColor"); }} ; control=RadEditorNamespace.RadColorPicker.New(toolArgs); control.Create( ); break; case "a\x6cign":var toolArgs= {GetController:getControllerFn,Document: this.Document,Name: "\x61lign",Title: this.GetLocalizedString("\x61lign","\x61lign"),ArrowUrl: this.ArrowIconUrl,SkinBasePath: this.Editor.SkinBasePath,IconUrl: this.GetIconUrl("\x2e./Img/A\x6c\x69g\x6e\x4did\x64leLef\x74.gif")} ; control=RadEditorNamespace.RadAlignmentSelector.New(toolArgs); control.Create( ); break; case RadEditorNamespace.RADCOMMAND_SET_CELL_PROPERTIES:case RadEditorNamespace.RADCOMMAND_SET_TABLE_PROPERTIES:case RadEditorNamespace.RADCOMMAND_SET_IMAGE_PROPERTIES:case RadEditorNamespace.RADCOMMAND_SET_LINK_PROPERTIES:var toolArgs= {GetController:getControllerFn,Document: this.Document,Name:name,Title: this.Localization[name],IconUrl: this.GetIconUrl(name+"\x2egif")} ; control=RadEditorNamespace.RadToolBase.New(toolArgs); control.Create( ); break; case "tar\x67et":var targetList= {_blank: this.GetLocalizedString("\x5fblan\x6b","_blan\x6b"),_self: this.GetLocalizedString("_sel\x66","\x5fsel\x66"),_parent: this.GetLocalizedString("_pare\x6et","_paren\x74"),_top: this.GetLocalizedString("_t\x6fp","_top"),_search: this.GetLocalizedString("\x5fsea\x72\x63h","\x5fsearch"),_media: this.GetLocalizedString("_me\x64\151\x61","_\x6d\145d\x69\141")} ; var toolArgs= {TargetList:targetList,Controller: this,Document: this.Document,Name:name } ; control=new RadEditorNamespace.RadTargetBox(toolArgs); control.Create( ); break; case "noWrap":var toolArgs= {Controller: this,Document: this.Document,Name:name } ; control=new RadEditorNamespace.RadCheckBox(toolArgs); control.Create( ); break; case "href":theWidth=200; case "\x74itle":case "val\x75e":case "NA\x4d\105":case "actio\x6e":case "id":if (!theWidth)theWidth=110; default:var toolArgs= {Controller: this,Document: this.Document,Name:name,Title: this.Localization[name],Width:theWidth } ; control=new RadEditorNamespace.RadSpinBox(toolArgs); control.Create( ); }return control; } ; RadEditorNamespace.AttributeInspector_OnRenderHorizontal= function ( ){var table=this.getElementsByTagName("TABLE")[0]; var panelRowCount=RadEditorNodeInspectorAttributesArray.length; var currentRowCount=table.rows.length; for (var counter=0; counter<panelRowCount; counter++){var newRow=table.insertRow(table.rows.length); var currentPanelRowCount=RadEditorNodeInspectorAttributesArray[counter].length*2; for (var i=0; i<currentPanelRowCount; i++){var curRow=table.rows[0]; var curCell=curRow.cells[0]; curRow.removeChild(curCell); curRow.parentNode.removeChild(curRow); newRow.appendChild(curCell); }} this.style.display="i\x6eline"; this.style.height=RadEditorNamespace.ATTRIBUTE_INSPECTOR_HORIZONTAL_HEIGHT; };RadEditorNamespace.AttributeInspector_OnRenderVertical= function ( ){var table=this.getElementsByTagName("TABLE")[0]; var rowCount=table.rows.length; for (var i=0; i<rowCount; i++){var curRow=table.rows[0]; var cellCount=curRow.cells.length; for (var j=0; j<cellCount; j++){var cell=curRow.cells[0]; var newRow=table.insertRow(table.rows.length); curRow.removeChild(cell); newRow.appendChild(cell); }curRow.parentNode.removeChild(curRow); } this.style.display="bloc\x6b"; };
O3.prototype=new RadEditorModuleBase( ); O3.prototype.base=RadEditorModuleBase.prototype.constructor; function O3(moduleArgs){var theDiv=moduleArgs.Document.createElement("DIV"); moduleArgs.ModuleElement=theDiv.cloneNode( true); this.base(moduleArgs); this.EnableMaxWidth= false; this.l3=this.GetLocalizedString("\x53ta\x74\151\x73ti\x63sWords","Wo\x72ds:"); this.i3=this.GetLocalizedString("Stat\x69sticsCh\x61racters","Ch\x61racters:"); }
; O3.prototype.OnCreate= function ( ){var selfPointer=this ; this.AttachEventHandler(RadEditorNamespace.RADEVENT_SEL_CHANGED, function ( ){selfPointer.I3( ); } ); if (this.Editor.Document.body)this.AttachEventHandler("onblur", function ( ){selfPointer.I3( ); } ); var isEnabled=this.IsEnabled; this.IsEnabled= true; this.I3( ); this.IsEnabled=isEnabled; } ; O3.prototype.I3= function ( ){if (!this.IsEnabled || !this.Editor.Document.body)return; var content=this.Editor.GetText( ); var o4=0; var O4=0; if (content){l4=/[\x21\x2e\x3f\x3b\x2c\x3a\x26\x5f\x2d\x7b\x7d\x5b\x5d\x28\x29\x7e\x23\x27\x22]/g; content=content.replace(l4,""); i4=/(^\s+)|(\s+$)/g; content=content.replace(i4,""); if (content){I4=/\s+/; var array=content.split(I4); o4=array.length; O4=content.length; }} this.ModuleElement.innerHTML="\074\x73pan s\x74yle=\x27line-he\x69ght:2\x32px\047\x3e"+this.l3+"\x20"+o4+" "+this.i3+" "+O4+"\x26nbsp;\074\057\x73pan>"; } ;
if (typeof(RadEditorXhtmlValidatorDocTypes)=="\x75ndefi\x6e\x65d"){RadEditorXhtmlValidatorDocTypes= { "XH\x54ML 1.0 \x53trict": ["\x21DOC\x54\131\x50E ht\x6dl PUBL\x49C \042-//W3C\x2f/DTD X\x48TML \x31.0 St\x72ict//\x45N\042\x20\042\150\x74tp://\x77ww.w3\x2eorg/\x54R/xh\x74ml1/D\x54D/xht\x6dl1-s\x74rict.\x64td\042", false],"XHT\x4dL 1.0 Tr\x61\156\x73\151\x74ional": ["\x21\104O\x43\124\x59\120E\x20html PU\x42LIC \042\055\x2f/W3C/\x2fDTD \x58HTML \x31.0 Tr\x61nsiti\x6fnal//\x45N\042\x20\042\x68t\x74p://\x77ww.w3\x2eorg/T\x52/xhtm\x6c1/DT\x44/xhtm\x6c1-tr\x61nsiti\x6fnal.\x64td\042", false],"\x58HTM\x4c\040\x31.1": ["!DOC\x54\131P\x45 html P\x55\102\x4cIC \042\x2d//W\x33C//DTD\x20XHTM\x4c 1.1/\x2fEN\042\x20\042http:\x2f/www.\x773.org/\x54R/xht\x6dl11/\x44TD/xh\x74ml11.\x64td\042", false] } ; }RadEditorXhtmlValidator.prototype=new RadEditorModuleBase( ); RadEditorXhtmlValidator.prototype.base=RadEditorModuleBase.prototype.constructor; function RadEditorXhtmlValidator(moduleArgs){moduleArgs.ModuleElement=moduleArgs.Document.createElement("d\x69v"); this.base(moduleArgs); }
; RadEditorXhtmlValidator.prototype.OnCreate= function ( ){ this.CreateHeader( ); this.CreateIframe( ); this.ModuleElement.appendChild(this.Iframe); } ; RadEditorXhtmlValidator.prototype.OnDispose= function ( ){if (this.ValidateButton){ this.ValidateButton.onclick=null; this.ValidateButton=null; }if (this.ToggleCheckbox){ this.ToggleCheckbox.onclick=null; this.ToggleCheckbox=null; } this.ContentField=null; this.DoctypeField=null; this.DoctypeSelect=null; this.ValidateForm=null; RadEditorNamespace.Utils.DetachEventEx(this.Iframe,"\154\x6fad",this.IframeLoadingFun); this.Iframe=null; } ; RadEditorXhtmlValidator.prototype.Validate= function ( ){oFinalContent="\x3cdi\x76\076"+this.Editor.getContent( )+"\074\x2fdiv>"; this.ContentField.value=oFinalContent; this.ShowIframe( true); if (this.ToggleCheckbox && !this.ToggleCheckbox.checked)this.ToggleCheckbox.checked= true; if (this.DoctypeSelect && this.DoctypeSelect.selectedIndex>-1){ this.DoctypeField.value="\x3c"+this.DoctypeSelect.options[this.DoctypeSelect.selectedIndex].value+">"; } this.ValidateForm.submit( ); } ; RadEditorXhtmlValidator.prototype.ShowIframe= function (toShow){var iframe=this.Iframe; if (toShow){iframe.style.width="99%"; var oHeight=400; iframe.style.height=oHeight+"px"; this.Editor.FixIeHeight(iframe,oHeight); iframe.style.border="\x31px \x72\x69dg\x65 #aaaaa\x61"; }else {iframe.style.width="\x30px"; iframe.style.height="\060\160\x78"; iframe.style.border="\x30px r\x69\144\x67e #\x61\141\x61aaa"; }} ; RadEditorXhtmlValidator.prototype.CreateIframe= function ( ){var iframe=document.createElement("\x69frame"); this.Iframe=iframe; iframe.frameBorder='0'; iframe.src=this.Editor.RadControlsDir+"Edi\x74or/Xhtml/\x58htmlVa\x6c\151\x64ator.a\x73px"; iframe.style.margin="\x31px"; this.ShowIframe( false); var oModule=this ; var oFun= function ( ){var oDoc=oModule.Iframe.contentWindow.document; oModule.ContentField=oDoc.getElementById("Edi\x74orConte\x6et"); oModule.DoctypeField=oDoc.getElementById("\x45ditor\x44\157\x63typ\x65"); oModule.ValidateForm=oDoc.forms["\x52ad\x45\144\x69torXhtml\x46orm"]; } ; this.IframeLoadingFun=oFun; RadEditorNamespace.Utils.AttachEventEx(iframe,"\x6coad",this.IframeLoadingFun); iframe=null; } ; RadEditorXhtmlValidator.prototype.CreateHeader= function ( ){var oModule=this ; var oBut=document.createElement("inpu\x74"); oBut.type="button"; oBut.className="RadEXh\x74mlButto\x6e"; oBut.onclick= function ( ){oModule.Validate( ); oModule.CheckboxChecked= true; };oBut.value=this.GetLocalizedString("\x56alid\x61\x74eX\x48TML","\126\x61lidate X\x48TML"); var oCheckbox=document.createElement("\x49NPUT"); oCheckbox.setAttribute("type","ch\x65\143\x6b\x62o\x78"); oCheckbox.style.marginBottom="2px"; this.CheckboxChecked= false; oCheckbox.onclick= function ( ){oModule.CheckboxChecked=!oModule.CheckboxChecked; this.checked=oModule.CheckboxChecked; oModule.ShowIframe(oModule.CheckboxChecked); } ; this.ModuleElement.appendChild(oCheckbox); this.ToggleCheckbox=oCheckbox; var oSpan=document.createElement("\x73pan"); oSpan.style.height="\x316px"; oSpan.onclick=new Function('this\x2epreviou\x73Sibling.\x63lick()'); oSpan.innerHTML=this.GetLocalizedString("\x45xpa\x6e\x64Va\x6c\151\x64ator","\x45xpand/Co\x6c\154\x61\160s\x65 Valid\x61tor")+" \x26\156\x62\163\x70\073\x20| &nbsp\x3b"; this.ModuleElement.appendChild(oSpan); var oSpan=document.createElement("span"); oSpan.innerHTML=this.GetLocalizedString("FormSele\x63t","\x53elect")+"\072"; this.ModuleElement.appendChild(oSpan); var oSelect=document.createElement("\x73elect"); oSelect.className="\x52adE\x44\162\x6fpDown"; oSelect.style.width="\x314\x30\x70x"; var doctypeList=RadEditorXhtmlValidatorDocTypes; for (var item in doctypeList){var newOption=new Option(item,doctypeList[item][0]); if (doctypeList[item][1]){newOption.selected= true; }oSelect.options[oSelect.options.length]=newOption; }oSelect.style.display="non\x65"; if (this.Editor.IsIE && "\x63omplete"!=document.readyState){RadEditorNamespace.Utils.AttachEventEx(window,"\x6co\x61\x64", function ( ){oModule.DoctypeSelect.style.display=""; } ); }else oSelect.style.display=""; this.ModuleElement.appendChild(oSelect); this.ModuleElement.appendChild(oBut); this.ValidateButton=oBut; this.DoctypeSelect=oSelect; oBut=null; oSpan=null; oCheckbox=null; oSelect=null; } ;
function RadEditorModuleBase(moduleArgs){if (!moduleArgs)return; this.Editor=moduleArgs.Editor; this.IsIE=this.Editor.IsIE; this.IsOpera=this.Editor.IsOpera; this.Localization=this.Editor.Localization; this.Document=moduleArgs.Document; this.ModuleElement=moduleArgs.ModuleElement; this.Title=moduleArgs.Title; this.Id=moduleArgs.Id; this.ModuleElement.className=moduleArgs.ClassName?moduleArgs.ClassName: "\x52\x61dEM\x6f\144\x75le"; this.TopElement=null; this.EventHandlerQueue= {} ; this.IsCreated= false; this.IsEnabled= false; this.IsDockable=moduleArgs.IsDockable; this.InitialDockingZoneId=moduleArgs.InitialDockingZoneId; this.VisibleDisplay=null; this.EnableMaxWidth= true; }RadEditorModuleBase.prototype.GetTopElement= function ( ){if (!this.IsCreated)this.Create( ); return this.TopElement; } ; RadEditorModuleBase.prototype.SetVisible= function (visible){if (visible && !this.IsEnabled)return; var oElem=this.GetTopElement( ); if (visible){if (oElem.Show){oElem.Show( ); }else oElem.style.display=this.VisibleDisplay; }else {if (oElem.Hide)oElem.Hide( ); else oElem.style.display="\x6eo\x6e\x65"; }} ; RadEditorModuleBase.prototype.OnModuleResize= function ( ){if (!window.event)return; var src=window.event.srcElement; if (src.tagName!="TA\x42LE")return; if (src && null!=src.IsDocked){if (!src.IsDocked( )){src.ShowOverlay( ); }}} ; RadEditorModuleBase.prototype.CreateDockableWrapper= function ( ){var oTable=RadEditorNamespace.Utils.GetPlainTable(document); oTable.insertRow(-1); if (this.IsDockable){oTable.width="\x3100%"; }var oCell=oTable.rows[0].insertCell(-1); oCell.innerHTML="\074\163p\x61n style\x3d\047\x66ont\x2dsize:1\x70x;line\x2dheigh\x74:0px\x3b\047\x3e&nbs\x70;\074\x2fsp\x61n>"; oCell.setAttribute("\x68ei\x67\150\x74","\x3100\x25"); oCell.appendChild(this.ModuleElement); if (this.IsDockable && RadEditorNamespace.Docking){var newTable=RadEditorNamespace.Docking.WrapInDockingContainer(oTable,this.IsVertical,RadEditorNamespace.RadEditorModule_RenderHorizontal,RadEditorNamespace.RadEditorModule_RenderVertical,"\x52adEMod\x75\x6ceT\x61ble","\x52\141d\x45\115\x6f\144\x75\154\x65Table",this.Title); oTable=newTable; } this.VisibleDisplay=this.IsIE && !this.IsOpera?"\x69\156\x6cine": ""; oTable.className="\x52adEMo\x64\165\x6ceTa\x62le"; if (!this.IsIE){oTable.setAttribute("\163\x74yl\x65","float:l\x65ft"); }if (this.Editor.IsIE && oTable.attachEvent){oTable.attachEvent("onresiz\x65",RadEditorModuleBase.prototype.OnModuleResize); }return oTable; } ; RadEditorModuleBase.prototype.Dispose= function ( ){for (var i in this.EventHandlerQueue){ this.DetachEventHandler(i); this.EventHandlerQueue[i]=null; } this.EventHandlerQueue=null; try {if (this.OnDispose)this.OnDispose( ); }catch (e){alert("Dispose\x20faile\x64 for "+this.Title+" - "+e.message); }if (this.TopElement){ this.TopElement.OnRenderVertical=null; this.TopElement.OnRenderHorizontal=null; this.TopElement.OnResize=null; this.TopElement.OnUndock=null; this.TopElement.OnDock=null; this.TopElement=null; } this.ModuleElement=null; this.Editor=null; } ; RadEditorModuleBase.prototype.SetEnabled= function (enabled){ this.IsEnabled=enabled; this.SetVisible(enabled); } ; RadEditorModuleBase.prototype.Create= function ( ){ this.TopElement=this.CreateDockableWrapper( ); var module=this ; this.IsCreated= true; if (this.OnCreate){ this.OnCreate( ); }return this.TopElement; } ; RadEditorNamespace.RadEditorModule_RenderHorizontal= function ( ){ this.style.width=""; if (this.OnRenderHorizontal!=null){ this.OnRenderHorizontal( ); }} ; RadEditorNamespace.RadEditorModule_RenderVertical= function ( ){ this.style.width="\x3100\x70\170"; if (this.OnRenderVertical!=null){ this.OnRenderVertical( ); }} ; RadEditorModuleBase.prototype.GetLocalizedString= function (key,defaultValue){var moduleName=typeof(this ).toString( ); var str=this.Localization[key]; return str!=null?str:defaultValue; } ; RadEditorModuleBase.prototype.AttachEventHandler= function (eventName,eventHandler){ this.EventHandlerQueue[eventName]=eventHandler; this.Editor.AttachEventHandler(eventName,this.EventHandlerQueue[eventName]); } ; RadEditorModuleBase.prototype.DetachEventHandler= function (eventName){ this.Editor.DetachEventHandler(eventName,this.EventHandlerQueue[eventName]); } ; RadEditorModuleBase.prototype.OnCreate= function ( ){} ; RadEditorModuleBase.prototype.OnDispose= function ( ){} ;
RadEditor.prototype.SetModulesVisible= function (setVisible){var modules=this.Modules; for (var count=0; count<modules.length; count++){modules[count].SetVisible(setVisible); }} ; RadEditor.prototype.LoadModules= function (theEditor){var oModuleLength=theEditor.DefaultModulesArray.length; if (oModuleLength>0){for (var i=0; i<oModuleLength; i++){var curModule=theEditor.DefaultModulesArray[i]; var arg=0; var moduleName=curModule[arg++]; var dockingZone=curModule[arg++]; var dockable=curModule[arg++]; var visible=curModule[arg++]; var controlPage=curModule[arg++]; var scriptFile=curModule[arg++]; var params=curModule[arg++]; var id=null; try {theEditor.LoadModule(moduleName,dockingZone,dockable,visible,id); }catch (e){} ; }var attachModuleHandlers= function (editor){editor.AttachEventHandler(RadEditorNamespace.RADEVENT_MODE_CHANGED, function ( ){var setVisible=(editor.Mode==RadEditorNamespace.RADEDITOR_DESIGN_MODE); editor.SetModulesVisible(setVisible); } ); editor.AttachEventHandler(RadEditorNamespace.RADEVENT_SIZE_CHANGED, function ( ){var oLength=editor.Modules.length; for (var i=0; i<oLength; i++){var oModule=editor.Modules[i]; oModule.UpdateDockedSize( ); }} ); } ; attachModuleHandlers(theEditor); }} ; RadEditor.prototype.LoadModule= function (moduleName,dockingZone,dockable,setVisible,id){var localizedName=this.GetLocalizedString(moduleName,moduleName); var moduleArgs= {Editor: this,Document:document,Title:localizedName,Id:id,InitialDockingZoneId:dockingZone,IsDockable:dockable && this.EnableDocking } ; eval("\x76\141\x72\040\x6dodule\x20= ne\x77 "+moduleName+"\x28\155\x6f\x64ul\x65Args)"); this.Modules[this.Modules.length]=module; var theEditor=this ; if (!module.IsCreated){var topElement=module.Create( ); var parentNode=this.GetDockingZoneById(module.InitialDockingZoneId); parentNode.appendChild(topElement); if (module.IsDockable){theEditor.MakeDockable(topElement); }module.SetEnabled(setVisible); if (setVisible)$ektron(parentNode).parent( ).show( ); theEditor.ResetSize( ); }module.TopElement.OnUndock= function ( ){module.Editor.ResetSize( ); module.TopElement.style.width=""; module.TopElement.width=""; };module.TopElement.OnDock= function ( ){module.Editor.ResetSize( ); module.UpdateDockedSize( ); };module.UpdateDockedSize= function ( ){var oModule=this ; var toResize= false; if (!oModule.IsDockable){var oElem=oModule.GetTopElement( ); if (oElem && oElem.parentNode && !oModule.Editor.IsZoneVertical(oElem.parentNode)){toResize= true; }}else {var oElem=oModule.GetTopElement( ); if (oElem.IsDocked && oElem.IsDocked( ) && !oElem.IsVertical)toResize= true; }if (toResize && oModule.EnableMaxWidth && oModule.TopElement){var oElem=oModule.TopElement; var oParent=oElem.parentNode; if (oParent && oParent.style.width=="\x3100%"){oElem.parentNode.style.width="\x3100%"; }oElem.style.width="100%"; if (oElem.Show && oElem.IsVisible && oElem.IsVisible( ))oElem.Show( ); }};return module; } ; RadEditor.prototype.GetModules= function ( ){return this.Modules; } ;
RadEditorNamespace.RadAlignmentSelector= {New:function (toolArgs){toolArgs.ClassName="Ra\x64\x45Tool\x4cong"; toolArgs.PopupWidth=73; toolArgs.PopupHeight=85; toolArgs.CellSpacing=2; toolArgs.CellPadding=2; toolArgs.PopupClassName="RadA\x6cignmen\x74Selector\x54abl\x65"; var obj=RadEditorNamespace.RadComboBoxBase.New(toolArgs); RadEditorNamespace.Utils.ExtendObject(obj,this ); obj.TagName=""; obj.ActiveAlignmentArray=null; obj.SelectedTuple=null; obj.NoAlignmentIndex=-1; obj.SkinBasePath=toolArgs.SkinBasePath; obj.ItemsPerRow=3; obj.IsPopupScrollable= false; return obj; } ,ImgAlignment: [["",""],["\156\x6fne",""],["",""],["",""],["top",""],["",""],["l\x65ft",""],["m\x69\144\x64\x6ce",""],["rig\x68\164",""],["",""],["bott\x6f\155",""],["",""]],CellAlignment: [["",""],["\156\x6f\156e",""],["",""],["\x6ceft","\x74op"],["\x63ent\x65\162","\x74op"],["\x72ig\x68\164","\164\x6f\160"],["\x6cef\x74","\x6d\151d\x64\154\x65"],["\x63ent\x65\162","middle"],["\x72ight","\x6diddle"],["left","\x62ott\x6f\155"],["cen\x74\145r","\x62ottom"],["\x72\151g\x68\x74","botto\x6d"]],TableAlignment: [["",""],["\x6eone",""],["",""],["\x6ceft",""],["\x63enter",""],["\x72ight",""],["",""],["",""],["",""],["",""],["",""],["",""]],CaptionIEAlignment: [["",""],["\156o\x6ee",""],["",""],["\x6ceft","\x74op"],["cente\x72","\x74op"],["\x72\151g\x68\164","\x74\157p"],["",""],["",""],["",""],["\x6c\145f\x74","\x62\157t\x74\157\x6d"],["cente\x72","\x62otto\x6d"],["right","\x62ottom"]],CaptionNSAlignment: [["",""],["none",""],["",""],["",""],["","to\x70"],["",""],["",""],["",""],["",""],["",""],["","\x62ot\x74\157m"],["",""]],AlignmentImages: ["\x78.gif","\x78.gif","x.gif","AlignT\x6f\160\x4ceft.gif","\x41lign\x54\157p\x43enter.g\x69f","\x41li\x67\156T\x6fpRight.g\x69f","AlignM\x69\144d\x6ceLeft.g\x69\146","Ali\x67nMiddleC\x65\156\x74\x65r\x2egif","\x41lignMi\x64\144\x6c\145\x52\x69gh\x74.gif","\x41lig\x6e\x42ot\x74omLeft.g\x69f","\101l\x69\147n\x42ottomCe\x6e\164\x65\162\x2e\147\x69\146","Align\x42\157t\x74omRight.\x67if"],SetTagName:function (tagName){ this.TagName=tagName; this.ActiveAlignmentArray=this.GetLookupTableByTagName(this.TagName); this.OnCellClick(this.NoAlignmentIndex); } ,GetLookupTableByTagName:function (tagName){switch (tagName.toUpperCase( )){case "\111\x4dG":return this.ImgAlignment; case "TAB\x4c\105":return this.TableAlignment; case "\x54D":return this.CellAlignment; case "TH":return this.CellAlignment; case "\x43APTION":return (this.IsIE?this.CaptionIEAlignment: this.CaptionNSAlignment); default:return null; }} ,ConfigureAlignmentTable:function (tagName){var table=this.PopupBodyElement; var count=0; for (var i=0; i<table.rows.length; i++){var isRowVisible= false; for (var j=0; j<table.rows[i].cells.length; j++){var cell=table.rows[i].cells[j]; var isCellVisible=this.IsAvailable(count++); cell.style.visibility=isCellVisible?"vi\x73ible": "\x68idden"; isRowVisible |= isCellVisible; }if (null!=document.all){table.rows[i].style.display=isRowVisible?"": "\x6eon\x65"; }}} ,IsAvailable:function (index){var isVisible= false; if (this.ActiveAlignmentArray){var alignment=this.ActiveAlignmentArray[index]; isVisible=((null!=alignment) && (""!=alignment[0] || ""!=alignment[1])); }return isVisible; } ,SetButtonImage:function (imgFileName){var oElem=this.GetTopElement( ).getElementsByTagName("IMG")[0]; oElem.src=this.SkinBasePath+"\x49mg/"+imgFileName; oElem.style.margin="\x34px"; } ,OnCellClick:function (index){if (index==this.NoAlignmentIndex){ this.SelectedTuple=""; this.SetButtonImage("\x78\056\x67if"); }else {if (this.ActiveAlignmentArray && 0<=index && index<this.ActiveAlignmentArray.length){ this.SelectedTuple=this.ActiveAlignmentArray[index]; this.SetButtonImage(this.AlignmentImages[index]); if (""!=this.ClientClickString)eval(this.ClientClickString); }}} ,SelectAlignment:function (align,vAlign){align=(""==align || !align)?"none":align.toUpperCase( ); vAlign=!vAlign?"":vAlign.toUpperCase( ); if (this.ActiveAlignmentArray){var selIndex=-1; for (i=0; i<this.ActiveAlignmentArray.length; i++){if (this.IsAvailable(i)){var ha=this.ActiveAlignmentArray[i][0].toUpperCase( ); var va=this.ActiveAlignmentArray[i][1].toUpperCase( ); if (-1==selIndex){selIndex=i; }if ((align==ha || align==va) && (vAlign==ha || vAlign==va)){ this.OnCellClick(i); return; }}} this.OnCellClick(selIndex); }} ,SetValue:function (align,vAlign){ this.SelectAlignment(align,vAlign); } ,GetAlign:function ( ){var value=(this.SelectedTuple?this.SelectedTuple[0]: ""); if ("\x6eon\x65"==value){value=""; }return value; } ,GetVAlign:function ( ){var value=(this.SelectedTuple?this.SelectedTuple[1]: ""); if ("\x6eone"==value){value=""; }return value; } ,OnBeforeShowPopup:function ( ){if (!this.ItemsCreated){ this.CreateItems( ); this.ItemsCreated= true; } this.ConfigureAlignmentTable(this.TagName); } ,CreateItems:function ( ){var oTable=this.PopupBodyElement; var oRow=null; var curRowItems=0; var arrayLength=this.AlignmentImages.length; for (var i=0; i<arrayLength; i++){if (0==i%this.ItemsPerRow){oRow=oTable.insertRow(-1); curRowItems=0; }curRowItems++; this.AddAlignmentCell(oRow,i); }} ,AddAlignmentCell:function (oRow,index){var oCell=oRow.insertCell(-1); oCell.RadClassOver="\x4fver"; oCell.RadClassOut=""; oCell.onmouseout=RadEditorNamespace.OnItemMouseOut; oCell.onmouseover=RadEditorNamespace.OnItemMouseOver; var oImg=this.Popup.CreateElement("\x69mg"); oImg.align="\x6did\x64\x6ce"; oImg.border="\x30"; oImg.src=this.SkinBasePath+"Img/"+this.AlignmentImages[index]; oCell.appendChild(oImg); this.ConfigureCell(oCell,this,index); return oCell; }} ;
